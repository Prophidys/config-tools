# Virtualization


The virtualization directory contains the tools which aims to standardize the way
we test an architecture in a virtual environment.

## Pre-requesites

```sh
$ pip install -r requirements.txt
```

## Collector

The collector tool is in charge to collect architecture information from
the edeploy directory generated by config-tools/download.sh.

### Usage

```sh
$ ./collector.py --help
Aspirateur.

Usage:
  collector (--config-dir=<path>) [--output-dir=<path>]
  collector (-h | --help)
  collector --version

Options:
  --config-dir=<path>   The config directory absolute path
                        [default: ./top/etc].
  --output-dir=<path>   The output dir of the virtual configuration
                        [default: ./].
  -h --help             Show this screen.
  --version             Show version.
```

### Run tests

```sh
$ py.test -v
```

### Example

```sh
$ ./config-tools/download.sh I.1.3.0 deployment-3nodes-D7.yml version=D7-I.1.3.0
```

It generates a directory 'top/' in the current directory.

```sh
$ ./collector.py --edeploy-dir=./top/etc
Virtual platform generated successfully at 'virt_platform.yml' !
```

It will generate a file 'virt_platform.yml' which describe the corresponding virtual
platform. You may take a look at a sample in the virtualization directory.
